<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>
        <%= producto.tituloProducto %> | Akalia
    </title>
    <%- include('../partials/head.ejs'); %>

        <link href=" https://cdn.jsdelivr.net/npm/@splidejs/splide@4.1.4/dist/css/splide.min.css " rel="stylesheet">
</head>

<body class="h-100 m-0 d-flex flex-column " style="min-height: 100vh">
    <%- include('../partials/navbar.ejs'); %>
        <main class="container py-4 " >
            <div
                class="row  bg-blanco-light rounded shadow-sm  d-flex justify-content-center mx-auto gap-3">
                <div
                    class="container row col-12 col-lg-7 d-flex align-items-start justify-content-center pt-3 imgs-container gap-3 mb-auto">
                    <!-- Imagen principal  -->
                    <section id="main-carousel" class="splide" aria-label="My Awesome Gallery">
                        <div class="splide__track">
                            <ul class="splide__list">
                                <% imagenes.forEach(function(img) { %>
                                    <li class="splide__slide">
                                        
                                            <img src="<%= img.urlImagen %>" alt="Imagen del producto"
                                                class="img-fluid splide-image object-fit-contain w-100 " />
                                        
                                    </li>
                                    <% }) %>
                            </ul>
                        </div>
                    </section>

                    <!-- Miniaturas -->
                    <ul id="thumbnails" class="thumbnails">
                        <% imagenes.forEach(function(img) { %>
                            <li class="thumbnail">
                                <img src="<%= img.urlImagen %>" class="img-thumbnail" alt="">
                            </li>
                            <% }) %>

                    </ul>
                </div>
                <!-- Info producto -->
                <div class="col-12 col-lg-5 px-3 py-4">
                    <h2 class="fw-bold mb-2">
                        <%= producto.tituloProducto %>
                    </h2>
                    <h3 class="text-vinotinto mb-3">$ <%= producto.precio %>
                    </h3>

                    <!-- Boton call to actión "iniciar pedido" color terracota #9e2c21  -->
                    <!-- Llama a la función iniciarPedido en /public/js/pedidos.js -->
                    <a class="btn btn-terracota d-flex align-items-center gap-2 px-4 mb-4" type="button" href="/usuario-pedidos/comprar/<%= producto._id %>">Iniciar
                        pedido</a>

                    <p class="lead text-muted lh-sm mb-3 text-break producto-descripcion"
                        aria-label="Descripción del producto">
                    <div class="mb-2"> Descipción: </div>
                    <%= producto.descripcionProducto %>

                        </p>

                        <!-- Hecho por -->
                        <div class="d-flex flex-column align-items-start justify-content-start ps-3">
                            <div class="mb-2 d-flex align-items-start justify-content-start gap-2">
                                <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28"
                                    fill="none">
                                    <path
                                        d="M11.725 5.3375C11.725 5.0962 11.6775 4.85725 11.5851 4.63432C11.4928 4.41138 11.3574 4.20882 11.1868 4.03819C11.0162 3.86756 10.8136 3.73221 10.5907 3.63987C10.3677 3.54753 10.1288 3.5 9.8875 3.5C9.6462 3.5 9.40726 3.54753 9.18432 3.63987C8.96138 3.73221 8.75882 3.86756 8.58819 4.03819C8.41756 4.20882 8.28221 4.41138 8.18987 4.63432C8.09753 4.85725 8.05 5.0962 8.05 5.3375V8.8375M11.725 5.3375V3.5875C11.725 3.10016 11.9186 2.63279 12.2632 2.28819C12.6078 1.94359 13.0752 1.75 13.5625 1.75C14.0498 1.75 14.5172 1.94359 14.8618 2.28819C15.2064 2.63279 15.4 3.10016 15.4 3.5875V5.3375M11.725 5.3375L11.8125 12.25M8.05 8.8375C8.05 8.35017 7.85641 7.88279 7.51181 7.53819C7.16721 7.19359 6.69984 7 6.2125 7C5.72516 7 5.25779 7.19359 4.91319 7.53819C4.56859 7.88279 4.375 8.35017 4.375 8.8375V18.375C4.375 20.4636 5.20469 22.4666 6.68153 23.9435C8.15838 25.4203 10.1614 26.25 12.25 26.25H14.6043C16.2287 26.2498 17.7865 25.6044 18.935 24.4557L20.9557 22.435C22.1044 21.2865 22.7498 19.7287 22.75 18.1043L22.7535 15.743C22.7546 15.5365 22.8377 15.3388 22.9845 15.1935C23.1552 15.0228 23.2906 14.8202 23.3829 14.5972C23.4753 14.3742 23.5228 14.1352 23.5228 13.8938C23.5228 13.6525 23.4753 13.4135 23.3829 13.1905C23.2906 12.9675 23.1552 12.7648 22.9845 12.5942C22.8138 12.4235 22.6112 12.2881 22.3882 12.1957C22.1652 12.1034 21.9262 12.0558 21.6848 12.0558C21.4435 12.0558 21.2045 12.1034 20.9815 12.1957C20.7585 12.2881 20.5558 12.4235 20.3852 12.5942C19.5527 13.4255 19.083 14.5525 19.0785 15.729M8.05 8.8375V14M15.4 5.3375V13.125M15.4 5.3375C15.4 4.85016 15.5936 4.38279 15.9382 4.03819C16.2828 3.69359 16.7502 3.5 17.2375 3.5C17.7248 3.5 18.1922 3.69359 18.5368 4.03819C18.8814 4.38279 19.075 4.85016 19.075 5.3375V17.5M19.075 17.5C18.3859 17.4997 17.7034 17.6353 17.0668 17.8992C16.4302 18.163 15.8519 18.5499 15.365 19.0377M19.075 17.5H19.0773"
                                        stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" />
                                </svg>
                                <span class="text-dark fw-semibold">Hecho por: <%= emprendimiento.nombreEmprendimiento
                                        %>
                                </span>
                            </div>

                            <!-- Categoría y etiquetas -->
                            <div class="d-flex gap-2 align-items-center mb-2">
                                <small class="text-muted">Categoría: <strong>
                                        <%= (producto.categoriaNombre && producto.categoriaNombre.length>0) ?
                                            producto.categoriaNombre :
                                            (producto.categoria ? producto.categoria : 'Sin categoría') %>
                                    </strong></small>
                            </div>

                            <div class="d-flex gap-2 align-items-center mb-3 text-wrap">
                                <small class="text-muted">Etiquetas: </small>
                                <% if (Array.isArray(producto.etiquetas) && producto.etiquetas.length>0) { %>
                                    <% producto.etiquetas.forEach(function(et){ %>
                                        <span class="badge bg-secondary me-1">
                                            <%= et %>
                                        </span>
                                        <% }) %>
                                            <% } %>
                            </div>


                            <!-- botón compartir-->
                            <a href="" class="d-flex align-items-center gap-2 ps-3 text-decoration-none">
                            <svg class="text-verde" width="20" height="28" viewBox="0 0 28 28" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M23.6251 1.7503C22.9289 1.7503 22.2612 2.02683 21.7689 2.51904C21.2767 3.01126 21.0001 3.67884 21.0001 4.37494C21.0001 5.07103 21.2767 5.73862 21.7689 6.23083C22.2612 6.72305 22.9289 6.99957 23.6251 6.99957C24.3213 6.99957 24.9889 6.72305 25.4812 6.23083C25.9735 5.73862 26.25 5.07103 26.25 4.37494C26.25 3.67884 25.9735 3.01126 25.4812 2.51904C24.9889 2.02683 24.3213 1.7503 23.6251 1.7503ZM19.2501 4.37494C19.25 3.34859 19.6108 2.35487 20.2694 1.56765C20.9281 0.780426 21.8426 0.249826 22.8529 0.0686799C23.8633 -0.112466 24.9052 0.0673785 25.7963 0.576748C26.6875 1.08612 27.3711 1.89258 27.7276 2.85503C28.0842 3.81748 28.0909 4.87463 27.7466 5.84153C27.4023 6.80843 26.729 7.62351 25.8444 8.14416C24.9598 8.66481 23.9203 8.85787 22.9077 8.68957C21.8951 8.52127 20.9739 8.00233 20.3054 7.22354L8.54907 12.6828C8.81923 13.5392 8.81923 14.458 8.54907 15.3144L20.3054 20.7736C21.0121 19.9518 21.9988 19.4216 23.0742 19.2857C24.1496 19.1499 25.2371 19.418 26.1261 20.0382C27.015 20.6584 27.6421 21.5865 27.8857 22.6426C28.1293 23.6987 27.9721 24.8076 27.4445 25.7544C26.917 26.7013 26.0567 27.4186 25.0304 27.7673C24.0041 28.1161 22.8849 28.0715 21.8896 27.6421C20.8943 27.2128 20.0939 26.4293 19.6434 25.4435C19.1929 24.4577 19.1245 23.3398 19.4514 22.3064L7.69509 16.8472C7.11311 17.5253 6.33737 18.009 5.47224 18.2331C4.6071 18.4573 3.69407 18.4111 2.85596 18.1008C2.01785 17.7906 1.29488 17.2311 0.784289 16.4977C0.273703 15.7643 0 14.8922 0 13.9986C0 13.105 0.273703 12.2328 0.784289 11.4994C1.29488 10.766 2.01785 10.2066 2.85596 9.89632C3.69407 9.58607 4.6071 9.5399 5.47224 9.76403C6.33737 9.98816 7.11311 10.4718 7.69509 11.15L19.4514 5.69075C19.3176 5.26498 19.2497 4.82124 19.2501 4.37494ZM4.37539 11.374C3.67921 11.374 3.01154 11.6505 2.51927 12.1427C2.02699 12.6349 1.75044 13.3025 1.75044 13.9986C1.75044 14.6947 2.02699 15.3623 2.51927 15.8545C3.01154 16.3467 3.67921 16.6232 4.37539 16.6232C5.07157 16.6232 5.73924 16.3467 6.23152 15.8545C6.72379 15.3623 7.00035 14.6947 7.00035 13.9986C7.00035 13.3025 6.72379 12.6349 6.23152 12.1427C5.73924 11.6505 5.07157 11.374 4.37539 11.374ZM23.6251 20.9976C22.9289 20.9976 22.2612 21.2741 21.7689 21.7663C21.2767 22.2586 21.0001 22.9261 21.0001 23.6222C21.0001 24.3183 21.2767 24.9859 21.7689 25.4781C22.2612 25.9703 22.9289 26.2469 23.6251 26.2469C24.3213 26.2469 24.9889 25.9703 25.4812 25.4781C25.9735 24.9859 26.25 24.3183 26.25 23.6222C26.25 22.9261 25.9735 22.2586 25.4812 21.7663C24.9889 21.2741 24.3213 20.9976 23.6251 20.9976Z"
                                    fill="currentColor" /> 
                            </svg>
                            <span class="h6 mb-0 text-verde">Compartir</span>
                            </a>

                        </div>
                </div>
            </div>
        </main>
        <%- include('../partials/footer.ejs'); %>
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
                integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
                crossorigin="anonymous"></script>
            <link href=" https://cdn.jsdelivr.net/npm/@splidejs/splide@4.1.4/dist/css/splide.min.css " rel="stylesheet">
            <script src=" https://cdn.jsdelivr.net/npm/@splidejs/splide@4.1.4/dist/js/splide.min.js "></script>
            <script src="/js/landing.js"> </script>
            <script src="/js/login_signup.js"></script>
            <script src="/js/validaciones-login-signup.js"></script>
            <script src="/js/captcha.js"></script>
            <script src="/js/perfilProducto.js"></script>
            <script src="/js/pedidos.js"></script>
    
            <!-- Bootstrap + FontAwesome -->
            <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>

</body>
<%- include('../partials/modal-login.ejs'); %>
    <%- include('../partials/modal-signup.ejs'); %>

</html>