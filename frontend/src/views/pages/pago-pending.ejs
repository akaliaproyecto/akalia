<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pago Pendiente | Akalia</title>
    <%- include('../partials/head.ejs'); %>
    <link rel="stylesheet" href="/styles/funciones-usuarios.css">
    <style>
        .pending-container {
            min-height: 70vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .pending-card {
            background: white;
            border-radius: 16px;
            padding: 3rem;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            max-width: 600px;
            text-align: center;
        }

        .pending-icon {
            width: 80px;
            height: 80px;
            background: #ffc107;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1.5rem;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
                opacity: 1;
            }
            50% {
                transform: scale(1.05);
                opacity: 0.8;
            }
        }

        .pending-icon svg {
            width: 40px;
            height: 40px;
            color: white;
        }

        .pending-details {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            text-align: left;
        }

        .info-box {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            text-align: left;
        }

        .info-box h6 {
            color: #495057;
            margin-bottom: 1rem;
        }

        .info-box p {
            color: #6c757d;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
        }

        .timeline {
            position: relative;
            padding-left: 2rem;
            margin: 1rem 0;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 0.5rem;
            top: 0;
            bottom: 0;
            width: 2px;
            background: #dee2e6;
        }

        .timeline-item {
            position: relative;
            padding-bottom: 1.5rem;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -1.5rem;
            top: 0.25rem;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #ffc107;
            border: 2px solid white;
            box-shadow: 0 0 0 2px #ffc107;
        }

        .timeline-item:last-child {
            padding-bottom: 0;
        }
    </style>
</head>

<body class="bg-blanco-light">
    <%- include('../partials/navbar.ejs'); %>

    <main class="pending-container">
        <div class="container">
            <div class="pending-card">
                <!-- Pending Icon -->
                <div class="pending-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 16">
                        <path d="M8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71V3.5z"/>
                        <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm7-8A7 7 0 1 1 1 8a7 7 0 0 1 14 0z"/>
                    </svg>
                </div>

                <!-- Pending Message -->
                <h1 class="akalia-title akalia-title--medium mb-3">Pago Pendiente</h1>
                <p class="text-muted mb-4">Tu pago está siendo procesado. Te notificaremos una vez que se confirme la transacción.</p>

                <!-- Pending Details -->
                <div class="pending-details">
                    <h6 class="mb-2">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-info-circle-fill me-2" viewBox="0 0 16 16">
                            <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"/>
                        </svg>
                        <strong>Estado de la Transacción:</strong>
                    </h6>
                    <p class="mb-0 small">La confirmación puede tardar entre unos minutos y 48 horas, dependiendo del método de pago utilizado.</p>
                </div>

                <!-- Order Details -->
                <% if (typeof pedido !== 'undefined' && pedido) { %>
                <div class="info-box">
                    <h6>Información del Pedido</h6>
                    <p><strong>N° de Pedido:</strong> #<%= pedido._id || pedido.id || 'N/A' %></p>
                    <% if (pedido.payment_id) { %>
                    <p><strong>ID de Pago:</strong> <%= pedido.payment_id %></p>
                    <% } %>
                    <% if (pedido.precioFinalPedido || pedido.total) { %>
                    <p><strong>Monto:</strong> $<%= (pedido.precioFinalPedido || pedido.total).toLocaleString('es-CO') %></p>
                    <% } %>
                </div>
                <% } %>

                <!-- Timeline -->
                <div class="info-box">
                    <h6>¿Qué sigue?</h6>
                    <div class="timeline">
                        <div class="timeline-item">
                            <strong>Verificación del pago</strong>
                            <p class="small text-muted mb-0">Estamos confirmando tu pago con la entidad bancaria.</p>
                        </div>
                        <div class="timeline-item">
                            <strong>Notificación por correo</strong>
                            <p class="small text-muted mb-0">Recibirás un email cuando se confirme el pago.</p>
                        </div>
                        <div class="timeline-item">
                            <strong>Preparación del pedido</strong>
                            <p class="small text-muted mb-0">Una vez confirmado, procesaremos tu pedido.</p>
                        </div>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="d-flex flex-column flex-sm-row gap-3 justify-content-center mt-4">
                    <a href="/usuario/compras" class="btn btn-terracota">
                        Ver mis compras
                    </a>
                    <a href="/" class="btn btn-outline-secondary">
                        Volver al inicio
                    </a>
                </div>

                <!-- Additional Info -->
                <div class="mt-4 p-3 bg-light rounded">
                    <small class="text-muted">
                        <strong>Nota:</strong> Puedes consultar el estado de tu pedido en cualquier momento desde la sección 
                        <a href="/usuario/compras" class="text-decoration-none">"Mis Compras"</a>.
                        Si tienes dudas, <a href="/contacto" class="text-decoration-none">contáctanos</a>.
                    </small>
                </div>
            </div>
        </div>
    </main>

    <%- include('../partials/footer.ejs'); %>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>
