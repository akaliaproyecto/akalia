<aside class="akalia-sidebar d-flex flex-column justify-content-between align-items-center ">
  <nav class="w-100 mt-4 d-flex flex-column align-items-center gap-3">

    <!-- Corregir enlace de "Mi perfil" para que use la ruta /mi-perfil -->
    <!-- Esta ruta ya está configurada en usuario.routes.js y funciona correctamente -->
    <a href="/mi-perfil" class="btn-option">
      <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28" fill="none">
        <path
          d="M19.25 10.5C19.25 11.8924 18.6969 13.2277 17.7123 14.2123C16.7277 15.1969 15.3924 15.75 14 15.75C12.6076 15.75 11.2723 15.1969 10.2877 14.2123C9.30312 13.2277 8.75 11.8924 8.75 10.5C8.75 9.10761 9.30312 7.77226 10.2877 6.78769C11.2723 5.80312 12.6076 5.25 14 5.25C15.3924 5.25 16.7277 5.80312 17.7123 6.78769C18.6969 7.77226 19.25 9.10761 19.25 10.5Z"
          fill="currentColor" />
        <path fill-rule="evenodd" clip-rule="evenodd"
          d="M0 14C0 10.287 1.475 6.72601 4.10051 4.10051C6.72601 1.475 10.287 0 14 0C17.713 0 21.274 1.475 23.8995 4.10051C26.525 6.72601 28 10.287 28 14C28 17.713 26.525 21.274 23.8995 23.8995C21.274 26.525 17.713 28 14 28C10.287 28 6.72601 26.525 4.10051 23.8995C1.475 21.274 0 17.713 0 14ZM14 1.75C11.6931 1.75012 9.43314 2.40163 7.4802 3.62955C5.52727 4.85746 3.96074 6.61187 2.96094 8.69084C1.96113 10.7698 1.56868 13.0888 1.82875 15.381C2.08882 17.6732 2.99084 19.8454 4.431 21.6475C5.6735 19.6455 8.40875 17.5 14 17.5C19.5912 17.5 22.3248 19.6437 23.569 21.6475C25.0092 19.8454 25.9112 17.6732 26.1713 15.381C26.4313 13.0888 26.0389 10.7698 25.0391 8.69084C24.0393 6.61187 22.4727 4.85746 20.5198 3.62955C18.5669 2.40163 16.3069 1.75012 14 1.75Z"
          fill="currentColor" />
      </svg>
      <span class="sidebar-label d-none d-md-inline">Mi perfil</span>
    </a>

    <!-- Usamos `usuarioActual` (se pasa automáticamente desde app.js) para evitar errores si no hay usuario -->
    <a href="/usuario-emprendimientos" class="btn-option">
      <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28" fill="none">
        <path
          d="M5.1975 2.3625C5.3618 2.17041 5.56577 2.01619 5.79536 1.91046C6.02495 1.80473 6.27473 1.74998 6.5275 1.75H21.4725C21.7253 1.74998 21.975 1.80473 22.2046 1.91046C22.4342 2.01619 22.6382 2.17041 22.8025 2.3625L27.3682 7.6895C27.7759 8.16521 28 8.77102 28 9.3975V9.84375C28.0001 10.71 27.7296 11.5546 27.2262 12.2595C26.7228 12.9644 26.0118 13.4945 25.1924 13.7756C24.3731 14.0566 23.4864 14.0747 22.6563 13.8272C21.8262 13.5797 21.0942 13.0791 20.5625 12.3953C20.1743 12.8954 19.6768 13.3001 19.108 13.5783C18.5393 13.8565 17.9144 14.0007 17.2812 14C16.6481 14.0007 16.0232 13.8565 15.4545 13.5783C14.8857 13.3001 14.3882 12.8954 14 12.3953C13.6118 12.8954 13.1143 13.3001 12.5455 13.5783C11.9768 13.8565 11.3519 14.0007 10.7188 14C10.0856 14.0007 9.46072 13.8565 8.89195 13.5783C8.32319 13.3001 7.82566 12.8954 7.4375 12.3953C6.90583 13.0791 6.17379 13.5797 5.34369 13.8272C4.51359 14.0747 3.6269 14.0566 2.80757 13.7756C1.98823 13.4945 1.27719 12.9644 0.773819 12.2595C0.270448 11.5546 -9.55475e-05 10.71 2.53129e-08 9.84375V9.3975C2.20632e-05 8.77102 0.224099 8.16521 0.63175 7.6895L5.1975 2.3625ZM8.3125 9.84375C8.3125 10.4819 8.56601 11.094 9.01727 11.5452C9.46853 11.9965 10.0806 12.25 10.7188 12.25C11.3569 12.25 11.969 11.9965 12.4202 11.5452C12.8715 11.094 13.125 10.4819 13.125 9.84375C13.125 9.61169 13.2172 9.38913 13.3813 9.22503C13.5454 9.06094 13.7679 8.96875 14 8.96875C14.2321 8.96875 14.4546 9.06094 14.6187 9.22503C14.7828 9.38913 14.875 9.61169 14.875 9.84375C14.875 10.4819 15.1285 11.094 15.5798 11.5452C16.031 11.9965 16.6431 12.25 17.2812 12.25C17.9194 12.25 18.5315 11.9965 18.9827 11.5452C19.434 11.094 19.6875 10.4819 19.6875 9.84375C19.6875 9.61169 19.7797 9.38913 19.9438 9.22503C20.1079 9.06094 20.3304 8.96875 20.5625 8.96875C20.7946 8.96875 21.0171 9.06094 21.1812 9.22503C21.3453 9.38913 21.4375 9.61169 21.4375 9.84375C21.4375 10.4819 21.691 11.094 22.1423 11.5452C22.5935 11.9965 23.2056 12.25 23.8438 12.25C24.4819 12.25 25.094 11.9965 25.5452 11.5452C25.9965 11.094 26.25 10.4819 26.25 9.84375V9.3975C26.25 9.18895 26.1755 8.98725 26.04 8.82875L21.4725 3.5H6.5275L1.96 8.82875C1.82446 8.98725 1.74998 9.18895 1.75 9.3975V9.84375C1.75 10.4819 2.00351 11.094 2.45477 11.5452C2.90603 11.9965 3.51807 12.25 4.15625 12.25C4.79443 12.25 5.40647 11.9965 5.85773 11.5452C6.30899 11.094 6.5625 10.4819 6.5625 9.84375C6.5625 9.61169 6.65469 9.38913 6.81878 9.22503C6.98288 9.06094 7.20544 8.96875 7.4375 8.96875C7.66956 8.96875 7.89212 9.06094 8.05622 9.22503C8.22031 9.38913 8.3125 9.61169 8.3125 9.84375ZM2.625 14.875C2.85706 14.875 3.07962 14.9672 3.24372 15.1313C3.40781 15.2954 3.5 15.5179 3.5 15.75V26.25H5.25V17.5C5.25 17.0359 5.43437 16.5908 5.76256 16.2626C6.09075 15.9344 6.53587 15.75 7 15.75H12.25C12.7141 15.75 13.1592 15.9344 13.4874 16.2626C13.8156 16.5908 14 17.0359 14 17.5V26.25H24.5V15.75C24.5 15.5179 24.5922 15.2954 24.7563 15.1313C24.9204 14.9672 25.1429 14.875 25.375 14.875C25.6071 14.875 25.8296 14.9672 25.9937 15.1313C26.1578 15.2954 26.25 15.5179 26.25 15.75V26.25H27.125C27.3571 26.25 27.5796 26.3422 27.7437 26.5063C27.9078 26.6704 28 26.8929 28 27.125C28 27.3571 27.9078 27.5796 27.7437 27.7437C27.5796 27.9078 27.3571 28 27.125 28H0.875C0.642936 28 0.420376 27.9078 0.256282 27.7437C0.0921873 27.5796 2.53129e-08 27.3571 2.53129e-08 27.125C2.53129e-08 26.8929 0.0921873 26.6704 0.256282 26.5063C0.420376 26.3422 0.642936 26.25 0.875 26.25H1.75V15.75C1.75 15.5179 1.84219 15.2954 2.00628 15.1313C2.17038 14.9672 2.39294 14.875 2.625 14.875ZM7 26.25H12.25V17.5H7V26.25ZM15.75 17.5C15.75 17.0359 15.9344 16.5908 16.2626 16.2626C16.5908 15.9344 17.0359 15.75 17.5 15.75H21C21.4641 15.75 21.9092 15.9344 22.2374 16.2626C22.5656 16.5908 22.75 17.0359 22.75 17.5V22.75C22.75 23.2141 22.5656 23.6592 22.2374 23.9874C21.9092 24.3156 21.4641 24.5 21 24.5H17.5C17.0359 24.5 16.5908 24.3156 16.2626 23.9874C15.9344 23.6592 15.75 23.2141 15.75 22.75V17.5ZM21 17.5H17.5V22.75H21V17.5Z"
          fill="currentColor" />
      </svg>
      <span class="sidebar-label d-none d-md-inline">Emprendimientos</span>
    </a>

    <!-- Enlace a la vista de productos del usuario. Si no hay usuario autenticado el id queda vacío. -->
    <a href="/productos/usuario-productos/<%= usuarioActual ? usuarioActual.idUsuario : '' %>" class="btn-option">
      <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28" fill="none">
        <path
          d="M10.5 7.875C10.5 8.57119 10.2234 9.23887 9.73116 9.73116C9.23887 10.2234 8.57119 10.5 7.875 10.5C7.17881 10.5 6.51113 10.2234 6.01884 9.73116C5.52656 9.23887 5.25 8.57119 5.25 7.875C5.25 7.17881 5.52656 6.51113 6.01884 6.01884C6.51113 5.52656 7.17881 5.25 7.875 5.25C8.57119 5.25 9.23887 5.52656 9.73116 6.01884C10.2234 6.51113 10.5 7.17881 10.5 7.875ZM8.75 7.875C8.75 7.64294 8.65781 7.42038 8.49372 7.25628C8.32962 7.09219 8.10706 7 7.875 7C7.64294 7 7.42038 7.09219 7.25628 7.25628C7.09219 7.42038 7 7.64294 7 7.875C7 8.10706 7.09219 8.32962 7.25628 8.49372C7.42038 8.65781 7.64294 8.75 7.875 8.75C8.10706 8.75 8.32962 8.65781 8.49372 8.49372C8.65781 8.32962 8.75 8.10706 8.75 7.875Z"
          fill="currentColor" />
        <path
          d="M3.5 1.75H11.5255C11.9896 1.7501 12.4346 1.93454 12.7628 2.26275L25.0128 14.5128C25.3408 14.8409 25.5251 15.286 25.5251 15.75C25.5251 16.214 25.3408 16.6591 25.0128 16.9872L16.9872 25.0128C16.6591 25.3408 16.214 25.5251 15.75 25.5251C15.286 25.5251 14.8409 25.3408 14.5128 25.0128L2.26275 12.7628C1.93454 12.4346 1.7501 11.9896 1.75 11.5255V3.5C1.75 3.03587 1.93437 2.59075 2.26256 2.26256C2.59075 1.93437 3.03587 1.75 3.5 1.75ZM3.5 11.5255L15.75 23.7755L23.7755 15.75L11.5255 3.5H3.5V11.5255Z"
          fill="currentColor" />
      </svg>
      <span class="sidebar-label d-none d-md-inline">Productos</span>
    </a>

    <!-- enlace a la vista de "mis ventas" del emprendedor (lista de pedidos del usuario) -->
    <a href="/usuario-pedidos/<%= usuarioActual ? usuarioActual.idUsuario : '' %>" class="btn-option">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28" fill="none">
        <path fill-rule="evenodd" clip-rule="evenodd"
          d="M19.25 26.25C21.1065 26.25 22.887 25.5125 24.1997 24.1997C25.5125 22.887 26.25 21.1065 26.25 19.25C26.25 17.3935 25.5125 15.613 24.1997 14.3003C22.887 12.9875 21.1065 12.25 19.25 12.25C17.3935 12.25 15.613 12.9875 14.3003 14.3003C12.9875 15.613 12.25 17.3935 12.25 19.25C12.25 21.1065 12.9875 22.887 14.3003 24.1997C15.613 25.5125 17.3935 26.25 19.25 26.25ZM28 19.25C28 21.5706 27.0781 23.7962 25.4372 25.4372C23.7962 27.0781 21.5706 28 19.25 28C16.9294 28 14.7038 27.0781 13.0628 25.4372C11.4219 23.7962 10.5 21.5706 10.5 19.25C10.5 16.9294 11.4219 14.7038 13.0628 13.0628C14.7038 11.4219 16.9294 10.5 19.25 10.5C21.5706 10.5 23.7962 11.4219 25.4372 13.0628C27.0781 14.7038 28 16.9294 28 19.25Z"
          fill="currentColor" />
        <path
          d="M16.5165 20.902C16.5988 21.945 17.423 22.757 18.9018 22.855V23.625H19.558V22.8498C21.0893 22.743 21.9835 21.924 21.9835 20.7375C21.9835 19.656 21.301 19.0995 20.076 18.8125L19.558 18.69V16.59C20.216 16.6652 20.6325 17.024 20.7323 17.521H21.8838C21.8015 16.5148 20.9388 15.729 19.558 15.6433V14.875H18.9018V15.6625C17.5945 15.7902 16.7055 16.576 16.7055 17.689C16.7055 18.6725 17.367 19.299 18.4678 19.5545L18.9018 19.6612V21.8872C18.2298 21.7857 17.7835 21.4148 17.6838 20.902H16.5165ZM18.8965 18.5325C18.2508 18.3838 17.9008 18.0775 17.9008 17.619C17.9008 17.1045 18.2788 16.7195 18.9018 16.6075V18.5325H18.8965ZM19.6525 19.838C20.4383 20.02 20.7988 20.314 20.7988 20.8337C20.7988 21.427 20.349 21.833 19.558 21.9082V19.817L19.6525 19.838Z"
          fill="currentColor" />
        <path
          d="M1.75 0C1.28587 0 0.840752 0.184374 0.512563 0.512563C0.184374 0.840752 0 1.28587 0 1.75L0 15.75C0 16.2141 0.184374 16.6592 0.512563 16.9874C0.840752 17.3156 1.28587 17.5 1.75 17.5H8.89525C8.99792 16.8968 9.14842 16.3135 9.34675 15.75H5.25C5.25 14.8217 4.88125 13.9315 4.22487 13.2751C3.5685 12.6187 2.67826 12.25 1.75 12.25V5.25C2.67826 5.25 3.5685 4.88125 4.22487 4.22487C4.88125 3.5685 5.25 2.67826 5.25 1.75H22.75C22.75 2.67826 23.1187 3.5685 23.7751 4.22487C24.4315 4.88125 25.3217 5.25 26.25 5.25V11.424C26.915 12.019 27.5047 12.698 28 13.4435V1.75C28 1.28587 27.8156 0.840752 27.4874 0.512563C27.1592 0.184374 26.7141 0 26.25 0L1.75 0Z"
          fill="currentColor" />
        <path
          d="M17.4965 8.89524L17.5 8.74999C17.4996 8.14728 17.3436 7.55487 17.0471 7.03014C16.7506 6.50542 16.3236 6.06615 15.8075 5.7549C15.2913 5.44365 14.7036 5.27095 14.1011 5.25354C13.4987 5.23612 12.9019 5.37458 12.3687 5.65551C11.8354 5.93643 11.3838 6.35029 11.0574 6.85702C10.7311 7.36374 10.5411 7.94615 10.506 8.54784C10.4708 9.14953 10.5916 9.7501 10.8567 10.2914C11.1218 10.8327 11.5221 11.2964 12.019 11.6375C13.5317 10.1993 15.4387 9.24458 17.4965 8.89524Z"
          fill="currentColor" />
      </svg>
      <span class="sidebar-label d-none d-md-inline">Mis ventas</span>
    </a>
 
    <a href="/usuario-compras/<%= usuarioActual ? usuarioActual.idUsuario : '' %>" class="btn-option">
      <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28" fill="none">
        <path
          d="M14 1.75C14.9283 1.75 15.8185 2.11875 16.4749 2.77513C17.1313 3.4315 17.5 4.32174 17.5 5.25V8.75H10.5V5.25C10.5 4.32174 10.8688 3.4315 11.5251 2.77513C12.1815 2.11875 13.0718 1.75 14 1.75ZM19.25 8.75V5.25C19.25 3.85761 18.6969 2.52226 17.7123 1.53769C16.7278 0.553123 15.3924 0 14 0C12.6076 0 11.2723 0.553123 10.2877 1.53769C9.30313 2.52226 8.75001 3.85761 8.75001 5.25V8.75H5.88001C5.25154 8.75014 4.64398 8.97575 4.16774 9.38584C3.6915 9.79592 3.37819 10.3633 3.28476 10.9847L1.48751 22.9775C1.39439 23.5998 1.43659 24.2348 1.61122 24.8393C1.78585 25.4438 2.08882 26.0035 2.49944 26.4802C2.91007 26.9569 3.41869 27.3395 3.99062 27.6018C4.56254 27.864 5.18431 27.9999 5.81351 28H22.1848C22.8141 28.0001 23.4361 27.8645 24.0082 27.6023C24.5804 27.3401 25.0892 26.9576 25.5 26.4809C25.9108 26.0041 26.2139 25.4443 26.3887 24.8397C26.5634 24.2351 26.6057 23.5999 26.5125 22.9775L24.7135 10.9847C24.6201 10.3636 24.3071 9.79646 23.8312 9.38641C23.3553 8.97636 22.7482 8.75056 22.12 8.75H19.25ZM17.5 10.5V13.125C17.5 13.3571 17.5922 13.5796 17.7563 13.7437C17.9204 13.9078 18.1429 14 18.375 14C18.6071 14 18.8296 13.9078 18.9937 13.7437C19.1578 13.5796 19.25 13.3571 19.25 13.125V10.5H22.1183C22.3277 10.5002 22.5302 10.5756 22.6888 10.7124C22.8475 10.8492 22.9518 11.0383 22.9828 11.2455L24.7818 23.2348C24.8379 23.6082 24.8128 23.9894 24.7082 24.3523C24.6035 24.7151 24.4218 25.0512 24.1755 25.3374C23.9291 25.6236 23.6239 25.8534 23.2806 26.0108C22.9374 26.1683 22.5642 26.2499 22.1865 26.25H5.81351C5.43585 26.2499 5.06265 26.1683 4.7194 26.0108C4.37615 25.8534 4.07092 25.6236 3.82455 25.3374C3.57819 25.0512 3.39648 24.7151 3.29185 24.3523C3.18722 23.9894 3.16212 23.6082 3.21826 23.2348L5.01726 11.2455C5.04822 11.0386 5.15226 10.8497 5.31053 10.7129C5.46881 10.5762 5.67084 10.5006 5.88001 10.5H8.75001V13.125C8.75001 13.3571 8.8422 13.5796 9.00629 13.7437C9.17039 13.9078 9.39295 14 9.62501 14C9.85708 14 10.0796 13.9078 10.2437 13.7437C10.4078 13.5796 10.5 13.3571 10.5 13.125V10.5H17.5Z"
          fill="currentColor" />
      </svg>
      <span class="sidebar-label d-none d-md-inline">Mis compras</span>
    </a>
    <!-- Agregar este enlace solo para admins -->
    <% if (usuarioActual && (usuarioActual.rolUsuario === 'admin' || usuarioActual.rol === 'administrador')) { %>
      <a href="/admin" class="btn-option">
        <i class="fas fa-shield-alt"></i>
        <span class="sidebar-label">Panel Admin</span>
      </a>
    <% } %>
  </nav>
  <div class="w-100 mb-4 d-flex flex-column align-items-center">

    <button class="btn-option w-100 d-flex logoutBtn" onclick="logout()">
      <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28" fill="none">
        <mask id="mask0_168_49" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="28" height="28">
          <rect width="28" height="28" fill="currentColor" />
        </mask>
        <g mask="url(#mask0_168_49)">
          <path
            d="M14 14.25C13.6694 14.25 13.3924 14.1382 13.1688 13.9146C12.9451 13.691 12.8333 13.4139 12.8333 13.0834V3.75004C12.8333 3.41949 12.9451 3.1424 13.1688 2.91879C13.3924 2.69518 13.6694 2.58337 14 2.58337C14.3306 2.58337 14.6076 2.69518 14.8313 2.91879C15.0549 3.1424 15.1667 3.41949 15.1667 3.75004V13.0834C15.1667 13.4139 15.0549 13.691 14.8313 13.9146C14.6076 14.1382 14.3306 14.25 14 14.25ZM14 24.75C12.5417 24.75 11.1757 24.473 9.90208 23.9188C8.62847 23.3646 7.52014 22.616 6.57708 21.673C5.63403 20.7299 4.88542 19.6216 4.33125 18.348C3.77708 17.0743 3.5 15.7084 3.5 14.25C3.5 13.0639 3.69444 11.9118 4.08333 10.7938C4.47222 9.67574 5.03611 8.65004 5.775 7.71671C5.98889 7.44449 6.26111 7.31324 6.59167 7.32296C6.92222 7.33268 7.21389 7.46393 7.46667 7.71671C7.68056 7.9306 7.77778 8.1931 7.75833 8.50421C7.73889 8.81532 7.63194 9.10699 7.4375 9.37921C6.9125 10.0792 6.51389 10.8473 6.24167 11.6834C5.96944 12.5195 5.83333 13.375 5.83333 14.25C5.83333 16.525 6.62569 18.4549 8.21042 20.0396C9.79514 21.6243 11.725 22.4167 14 22.4167C16.275 22.4167 18.2049 21.6243 19.7896 20.0396C21.3743 18.4549 22.1667 16.525 22.1667 14.25C22.1667 13.3556 22.0354 12.4855 21.7729 11.6396C21.5104 10.7938 21.0972 10.0209 20.5333 9.32087C20.3389 9.0681 20.2319 8.79101 20.2125 8.48962C20.1931 8.18824 20.2903 7.9306 20.5042 7.71671C20.7375 7.48337 21.0194 7.36185 21.35 7.35212C21.6806 7.3424 21.9528 7.46393 22.1667 7.71671C22.925 8.65004 23.5035 9.67087 23.9021 10.7792C24.3007 11.8875 24.5 13.0445 24.5 14.25C24.5 15.7084 24.2229 17.0743 23.6687 18.348C23.1146 19.6216 22.366 20.7299 21.4229 21.673C20.4799 22.616 19.3715 23.3646 18.0979 23.9188C16.8243 24.473 15.4583 24.75 14 24.75Z"
            fill="currentColor" />
        </g>
      </svg>
      <span class="sidebar-label d-none d-md-inline">Cerrar sesión</span>
    </button>

  </div>
</aside>